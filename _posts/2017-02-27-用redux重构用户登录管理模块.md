---
layout: post
title: 用redux重构用户登录管理模块
categories:
- 技术

tags:
- Redux
- React
---

# 三端整合第一步，Redux重构。

上周五，我们项目的用户登录登出模块已经用Redux重构了。整个用户状态管理更加简单，清晰易懂。不过，Redux和我们以前的设计理念大不相同，相当于是架构上的修改，很多与用户状态、用户权限相关的逻辑模块都受到了影响。好在Redux可以在一定程度上实现非侵入式的替换现有设计(你把老的代码当做有转态的展示组件就可以了，关于容器组件和展示组件的概念，你可以看阮老师的博客，也可以看redux的官方文档),所以，整个项目重构不会出现短期失控的情况。



# 关于redux重构要点

1. 第一步是createStore, 在这里你就应该设计好整个app的状态树结构。
2. 对于想要用redux进行状态管理的主见用connect管理起来。connect的作用就是生成一个容器组件的东西，所以你写的那个被connect的组件应该是一个纯UI组件,尽量不要使用state，但是纯UI组件也不是一个非黑即白的概念，只是认为的一种约束和约定，最终实现的时候还是得从实际情况出发，从投入产出比出发进行考虑，该用state的地方还得用state。
3. 把redux-log应用起来，可以省去很多console.log的语句，调试方便多了。

等所有组件都用redux管理起来以后就可以考虑把平台相关的逻辑放到容器层里面去了。
